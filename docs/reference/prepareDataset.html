<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Take a matrix or data frame containing RNA sequencing,
microarray, or expression proteomics data and returns a BSRDataModel
object ready for subsequent training. Normally, BSRDataModel objects
are not instantiated directly, but through this function."><title>Prepare a BSRDataModel object from expression data — prepareDataset • BulkSignalR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare a BSRDataModel object from expression data — prepareDataset"><meta property="og:description" content="Take a matrix or data frame containing RNA sequencing,
microarray, or expression proteomics data and returns a BSRDataModel
object ready for subsequent training. Normally, BSRDataModel objects
are not instantiated directly, but through this function."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BulkSignalR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/BulkSignalR.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jcolinge/BulkSignalR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare a BSRDataModel object from expression data</h1>
      <small class="dont-index">Source: <a href="https://github.com/jcolinge/BulkSignalR/blob/HEAD/R/dataPrepare.R" class="external-link"><code>R/dataPrepare.R</code></a></small>
      <div class="d-none name"><code>prepareDataset.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Take a matrix or data frame containing RNA sequencing,
microarray, or expression proteomics data and returns a BSRDataModel
object ready for subsequent training. Normally, BSRDataModel objects
are not instantiated directly, but through this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepareDataset</span><span class="op">(</span></span>
<span>  <span class="va">counts</span>,</span>
<span>  normalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  symbol.col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min.count <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  prop <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UQ"</span>, <span class="st">"TC"</span><span class="op">)</span>,</span>
<span>  log.transformed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min.LR.found <span class="op">=</span> <span class="fl">80</span>,</span>
<span>  species <span class="op">=</span> <span class="st">"hsapiens"</span>,</span>
<span>  conversion.dict <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Gene.name <span class="op">=</span> <span class="st">"A"</span>, row.names <span class="op">=</span> <span class="st">"B"</span><span class="op">)</span>,</span>
<span>  UQ.pc <span class="op">=</span> <span class="fl">0.75</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>counts</dt>
<dd><p>A table or matrix of read counts.</p></dd>


<dt>normalize</dt>
<dd><p>A logical indicating whether <code>counts</code> should be
normalized according to <code>method</code> or if it was normalized beforehand.</p></dd>


<dt>symbol.col</dt>
<dd><p>The index of the column containing the gene symbols in case
those are not the row names of <code>counts</code> already.</p></dd>


<dt>min.count</dt>
<dd><p>The minimum read count of a gene to be considered expressed
in a sample.</p></dd>


<dt>prop</dt>
<dd><p>The minimum proportion of samples where a gene must be
expressed higher than <code>min.count</code> to keep that gene.</p></dd>


<dt>method</dt>
<dd><p>The normalization method ('UQ' for upper quartile or 'TC'
for total count).</p></dd>


<dt>log.transformed</dt>
<dd><p>A logical indicating whether expression data were
already log2-transformed, e.g., some microarray data.</p></dd>


<dt>min.LR.found</dt>
<dd><p>The minimum number of ligands or receptors found in
<code>count</code> row names after eliminating the rows containing too many
zeros according to <code>min.count</code> and <code>prop</code>.</p></dd>


<dt>species</dt>
<dd><p>The dataset belongs to this organism.</p></dd>


<dt>UQ.pc</dt>
<dd><p>Percentile for upper-quartile normalization, number
between 0 and 1 (in case the default 0.75 - hence the name - is not
appropriate).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A BSRModelData object with empty model parameters.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>counts</code> matrix or table should be provided with expression
  levels of protein coding genes in each samples (column) and
  <code>rownames(counts)</code> set to HUGO offcial gene symbols. For commodity, it
  is also possible to provide <code>counts</code> with the
  gene symbols stored in one of its columns. This column must be specified
  with <code>symbol.col</code>. In such a case, <code>prepareDataset</code> will extract
  this column and use it to set the row names. Because row names must be
  unique, <code>prepareDataset</code> will eliminate rows with duplicated gene
  symbols by keeping the rows with maximum average expression. Gene symbol
  duplication may occur in protein coding genes after genome alignment
  due to errors in genome feature annotation files (GTF/GFF), where a handful
  of deprecated gene annotations might remain, or
  some genes are not given their fully specific symbols. If your read count
  extraction pipeline does not take care of this phenomenon, the maximum mean
  expression selection strategy implemented here should solve this difficulty
  for the sake of inferring ligand-receptor interactions.</p>
<p>If <code>normalize</code> is <code>TRUE</code> then normalization is performed
  according to <code>method</code>. If those two simple methods are not satisfying,
  then it is possible to provide a pre-normalized matrix setting
  <code>normalize</code> to <code>FALSE</code>.</p>
<p>In case proteomic or microarray data are provided, <code>min.count</code> must be
  understood as its equivalent with respect to those data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">'prepareDataset'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sdc</span>,package<span class="op">=</span><span class="st">'BulkSignalR'</span><span class="op">)</span></span>
<span><span class="va">normal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^N"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sdc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">bsrdm</span> <span class="op">&lt;-</span> <span class="fu">prepareDataset</span><span class="op">(</span><span class="va">sdc</span><span class="op">[</span>,<span class="op">-</span><span class="va">normal</span><span class="op">]</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jacques Colinge, Jean-Philippe Villemin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer></div>

  

  

  </body></html>

